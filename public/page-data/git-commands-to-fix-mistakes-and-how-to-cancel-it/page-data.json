{"componentChunkName":"component---src-templates-blog-post-js","path":"/git-commands-to-fix-mistakes-and-how-to-cancel-it/","result":{"data":{"post":{"id":"cG9zdDoxNTkz","excerpt":"<p>If you made a mistake in Git commands, figuring out what is happening and how to fix it is not an easy task.&nbsp;The Git documentation is a rabbit hole, from which you get out only knowing the specific name of the team that will solve your problem. We talk about the commands that will help [&hellip;]</p>\n","content":"\n<p>If you made a mistake in Git commands, figuring out what is happening and how to fix it is not an easy task.&nbsp;The Git documentation is a rabbit hole, from which you get out only knowing the specific name of the team that will solve your problem.</p>\n\n\n\n<p>We talk about the commands that will help you get out of problem situations.</p>\n\n\n\n<h2>Damn, I did something wrong &#8230; Does Git have a time machine ?!</h2>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><span class=\"wp-image-1740 inline-gatsby-image-wrapper gatsby-image-wrapper\" style=\"position:relative;overflow:hidden;max-width:100%;width:446px\" data-reactroot=\"\"><span aria-hidden=\"true\" style=\"width:100%;padding-bottom:59.82142857142858%\"></span><img aria-hidden=\"true\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQoz0WSW2/iMBCFJwkBUVXQLMjNxcSO40uMTWInKaiFQh92//9fWiVIu9/DvB2dM3MG1q/89dUs8QHa01owJX4p1eR53rZtlmXRTBzH0SIKgmAxs1wu4zgOggCqCr6+gBwgCoLB+9+//zjnkiThnGOMhRBKqePx2DQNY8w5VxRF0zTe+yRJIE3BGCAEwjB0rrter1LK7XZ7uVwIIYfD4XK5MMYopV3XOecIIYwxKaUxBqQA38MBQxSFw9A/Hg+t9WazGccRY1yWZd/3UkqtNca4qioxgzEmhIAQ4B3gAhaL0Pf+8XicTqftduucq6qqLEvvPedcKSWEoJTebjdrbVmWVVVBUYDW8P4+OXddd7/fj8fjW/LWdZ0xBiHEOZdSMsa01oQQrXWWZQihLMuAUuh7wHhy7nt/v9+11mmaDuNICCmKYhxHKWVd1+fzebfbrVarl5eX5cx0qo+PaUZROI7jz8+PMSZJEmstxlhr7ZyTUuZ5rpTSWg/D0HVdmqZ5noOSMAyQ5/9jt2272WzO5zPn/KmRUnLOm6ahlA7DYK2llE5iQqDrIMsmsff+drt57/f7vZSybVuEkLWWc/5s61l7WZZCCIQQVBROdmo7jqfY39/f/8Raa4QQY0w1yhhT1zVjzHtf13UURavVCqScP2ze2Tn3db1aa3e7ndbaWrvf751zn5+f6/U6nHl+KMz8BWnaWI+wgPBjAAAAAElFTkSuQmCC\" alt=\"\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:0;transition-delay:500ms\"/><picture><source srcSet=\"/static/6652545690d8f3ecfbf28903c0235215/5b174/github-reflog.png 112w,\n/static/6652545690d8f3ecfbf28903c0235215/5d50f/github-reflog.png 223w,\n/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png 446w\" sizes=\"(max-width: 446px) 100vw, 446px\"/><img sizes=\"(max-width: 446px) 100vw, 446px\" srcSet=\"/static/6652545690d8f3ecfbf28903c0235215/5b174/github-reflog.png 112w,\n/static/6652545690d8f3ecfbf28903c0235215/5d50f/github-reflog.png 223w,\n/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png 446w\" src=\"/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png\" alt=\"git-reflog\" loading=\"eager\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 500ms\"/></picture><noscript><picture><source srcset=\"/static/6652545690d8f3ecfbf28903c0235215/5b174/github-reflog.png 112w,\n/static/6652545690d8f3ecfbf28903c0235215/5d50f/github-reflog.png 223w,\n/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png 446w\" sizes=\"(max-width: 446px) 100vw, 446px\" /><img loading=\"eager\" sizes=\"(max-width: 446px) 100vw, 446px\" srcset=\"/static/6652545690d8f3ecfbf28903c0235215/5b174/github-reflog.png 112w,\n/static/6652545690d8f3ecfbf28903c0235215/5d50f/github-reflog.png 223w,\n/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png 446w\" src=\"/static/6652545690d8f3ecfbf28903c0235215/8e065/github-reflog.png\" alt=\"git-reflog\" style=\"position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center\"/></picture></noscript></span></figure></div>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ngit reflog\n# Here you will see everything that you did\n# in Git in all branches.\n# Each item has an index HEAD @ {index}.\n# Find the one after which everything broke.\ngit reset HEAD @ {index}\n# Time machine at your service.\n</pre></div>\n\n\n<p>So you can restore what you accidentally deleted, and roll back the merge, after which everything broke.&nbsp;<code>reflog</code>used very often &#8211; let&#8217;s thank the one who suggested adding it to Git.</p>\n\n\n\n<h2>I just committed and noticed that something needs to be fixed!</h2>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" width=\"686\" height=\"396\" src=\"/static/bccc4b257c9d132824c1780987d7b13d/git-add.png\" alt=\"git-add\n\" class=\"wp-image-1741\" srcset=\"/static/bccc4b257c9d132824c1780987d7b13d/git-add.png 686w, http://localhost/creador-backend/wp-content/uploads/2020/04/git-add-300x173.png 300w\" sizes=\"(max-width: 686px) 100vw, 686px\" /></figure></div>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# Make changes\ngit add. # or add files individually.\ngit commit --amend --no-edit\n# Now the last commit contains your changes.\n# ATTENTION! Never modify published commits.\n</pre></div>\n\n\n<p>Usually this command is needed if you committed something, and then noticed some trifle, for example, a missing space after the sign&nbsp;<code>=</code>.&nbsp;Of course, you can make changes with a new commit, and then combine the commits with&nbsp;<code>rebase -i</code>, but this is much longer.</p>\n\n\n\n<p>Caution&nbsp;Never modify commits in a public branch.&nbsp;Use this command only for commits in the local branch, otherwise you will end.</p>\n\n\n\n<h2>I need to change the message of the last commit!</h2>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" width=\"962\" height=\"662\" src=\"/static/4bf75f39ff430d782e6925fbd52551c0/git-commit-commands.png\" alt=\"github-merge\" class=\"wp-image-1744\" srcset=\"/static/4bf75f39ff430d782e6925fbd52551c0/git-commit-commands.png 962w, http://localhost/creador-backend/wp-content/uploads/2020/04/git-commit-commands-300x206.png 300w, http://localhost/creador-backend/wp-content/uploads/2020/04/git-commit-commands-768x528.png 768w\" sizes=\"(max-width: 962px) 100vw, 962px\" /></figure></div>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ngit commit --amend\n# Opens the commit message editor.\n</pre></div>\n\n\n<p>Dumb posting requirements &#8230;</p>\n\n\n\n<h2>I accidentally committed something to the master, although I had to in a new branch!</h2>\n\n\n\n<div class=\"wp-block-image\"><figure class=\"aligncenter size-large\"><img loading=\"lazy\" width=\"675\" height=\"348\" src=\"/static/f1d50570de0cc11afb1d5f35fbe89cc1/github-branch-merge.png\" alt=\"git-branch-merge\" class=\"wp-image-1746\" srcset=\"/static/f1d50570de0cc11afb1d5f35fbe89cc1/github-branch-merge.png 675w, http://localhost/creador-backend/wp-content/uploads/2020/04/github-branch-merge-300x155.png 300w\" sizes=\"(max-width: 675px) 100vw, 675px\" /></figure></div>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# This command will create a new branch from the current state of the wizard.\ngit branch some-new-branch-name\n# And this one will delete the last commit from the master branch.\ngit reset HEAD ~ --hard\ngit checkout some-new-branch-name\n# Now your commit is completely independent :)\n</pre></div>\n\n\n<p>Teams will not work if you have already committed to a public branch.&nbsp;In this case, it may help&nbsp;<code>git reset HEAD@{</code>some-number-commits-back<code>}</code>instead&nbsp;<code>HEAD~</code>.</p>\n\n\n\n<h2>Well, great.&nbsp;I committed to the wrong branch!</h2>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# Undoes the last commit, but leaves the changes available.\ngit reset HEAD ~ --soft\ngit stash\n# Switch to the desired branch.\ngit checkout name-of-the-correct-branch\ngit stash pop\n# Add a specific file or do not worry and drop everything at once.\ngit add.\ngit commit -m &quot;Your message will be here&quot;\n# Now your changes in the right branch.\n</pre></div>\n\n\n<p>Many in this situation offer to use&nbsp;<code>cherry-pick</code>, so you can choose what you like best.</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ngit checkout name-of-the-correct-branch\n# Take the last commit from the master.\ngit cherry-pick master\n# Delete it from the wizard.\ngit checkout master\ngit reset HEAD ~ --hard\n</pre></div>\n\n\n<h2>I try to run diff but nothing happens</h2>\n\n\n\n<p>If you know that the changes have been made, but are&nbsp;<code>diff</code>empty, then perhaps you indexed the changes (through&nbsp;<code>add</code>).&nbsp;Therefore, you need to use a special flag.</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ngit diff --staged\n</pre></div>\n\n\n<p>Of course, &#8220;this is not a bug, but a feature,&#8221; but at first glance it is damn ambiguous.</p>\n\n\n\n<h2>I need to somehow&nbsp;&nbsp;cancel the commit that was made 5 commits ago</h2>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# Find the commit you want to cancel.\ngit log\n# You can use the arrows to scroll up and down the list.\n# Save the hash of the desired commit.\ngit revert &#91;that hash]\n# Git will create a new commit overriding the selected one.\n# Edit the commit message or just save it.\n</pre></div>\n\n\n<p>You do not have to roll back and copy-paste the old files, replacing them with new ones.&nbsp;If you committed a bug, then the commit can be undone with&nbsp;<code>revert</code>.</p>\n\n\n\n<p>In addition, you can not roll back the whole commit, but a separate file.&nbsp;But following the canon of Git, these will be completely different teams &#8230;</p>\n\n\n\n<h2>I need to undo the changes to the file</h2>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# Find the hash of the commit to roll back to.\ngit log\n# Save the hash of the desired commit.\ngit checkout &#91;that hash] --path / to / file\n# Now the index will be the old version of the file.\ngit commit -m “Oh my gadble, you didn't even use copy-paste”\n</pre></div>\n\n\n<p>That is why it&nbsp;<code>checkout</code>is the best tool to roll back changes to files.</p>\n\n\n\n<h2>Come on again, Misha, all x</h2>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\ncd ..\nsudo rm -r git-repo-dir\ngit clone https://some.github.url/fucking-git-repo-dir.git\ncd git-repo-di\n</pre></div>\n\n\n<p>If you need to completely roll back to the original version (i.e. cancel all changes), then you can try to do so.</p>\n\n\n\n<p>Be careful, these commands are destructive and irreversible.</p>\n\n\n<div class=\"wp-block-syntaxhighlighter-code \"><pre class=\"brush: bash; title: ; notranslate\" title=\"\">\n# Get the last state of origin.\ngit fetch origin\ngit checkout master\ngit reset --hard origin / master\n# Delete unindexed files and folders.\ngit clean -d --force\n# Repeat checkout / reset / clean for each broken branch.\n</pre></div>\n\n\n<p>These Git commands are needed for emergency situations, but not only they can come in handy.</p>\n\n\n\n<p><a href=\"/useful-git-commands-safely-cancel-commits-add-a-file-from-another-branch-and-others/\" target=\"_blank\" rel=\"noreferrer noopener\">Useful Git Commands: safely cancel commits, add a file from another branch, and others</a></p>\n","title":"Git commands to fix mistakes and How to cancel it?","date":"April 19, 2020","featuredImage":{"node":{"altText":"github-git","localFile":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='225'%20viewBox='0%200%20400%20225'%20preserveAspectRatio='none'%3e%3cpath%20d='M280%2045c-36%2011-40%2061-6%2077%207%204%208%203%208-2v-5h-5c-4%200-6-1-12-9-4-6%200-6%205%200%206%206%2012%206%2013-1%201-1%200-2-4-3-11-3-17-17-11-27%201-2%202-5%201-6l1-6c1-3%204-3%2010%201h21l5-1c7-4%208-3%209%204l2%209c5%2011-2%2025-13%2027h-4l2%204%201%2010c0%209%200%209%208%205%208-3%2015-11%2019-19%203-6%204-7%204-18s-1-12-4-18c-9-19-31-28-50-22M70%2085l-3%203%203%204%205%203c2%200%204%202%204%204s5%207%208%208c4%200%205%205%202%207s-6%201-7-3l-3-4-2-3v7l1%2010c2%204%200%206-4%206-3%200-5-4-3-7%203-2%203-16%201-18l-2-3c0-2-1-4-3-5l-3-3-9%209-9%2011%2014%2014c11%2011%2014%2014%2016%2014%202-1%2027-26%2027-28S76%2082%2075%2082l-5%203m99%205c0%202-1%204-3%205-4%202-4%206-1%206%202%200%202%201%202%2010%200%2010%200%2011%204%2013s14%200%2014-2c0-3-2-4-4-4-4%201-5%200-5-9v-7l4-1c4%200%204%200%204-3s0-3-5-3h-4v-4c0-3%200-4-2-4s-3%200-4%203m-48%207c-5%203-7%2011-3%2015l2%203-2%202c-2%203-3%206-1%208v2c-4%203-2%208%203%2010%2011%204%2024-1%2024-9%200-6-5-8-19-9-3%200%201-2%204-2%205%200%2011-3%2012-7v-7c-1-2-1-2%201-2%203%200%203%200%203-2v-3h-11l-13%201m27%201c-1%201%200%202%201%203%203%202%203%2019%200%2019-1%200-2%201-2%203s0%202%208%202%208%200%208-2l-1-3c-2%200-2-2-2-12V96h-6c-5%200-6%200-6%202m93%2033c-6%201-10%2010-9%2018%201%209%206%2013%2014%2013%209%200%2010-1%2010-10v-8h-5c-6%200-6%200-6%203%200%202%200%203%202%203s2%201%202%203c0%203%200%203-3%203-4%200-6-2-7-7-1-8%202-12%2010-12%204%200%205%200%205-2v-3c-1-1-10-2-13-1m45%201l-1%2015v15h3c4%200%204%200%204-7v-6h8v6c1%207%201%207%204%207h3v-31h-3c-3%200-4%201-4%206v6h-8v-6c0-6%200-6-3-6l-3%201m46%2014v16h12c5%200%208-3%208-11s-4-12-10-11l-3%201v-5c0-4-1-5-4-5h-3v15m-61-8l-1%204c-1%200-2%201-2%203l2%202%201%206c0%207%204%2011%209%209%203%200%202-5%200-5-2-1-2-2-2-5%200-4%200-5%202-5s2-1%202-3%200-3-2-3c-1%200-2-1-2-3s-1-3-4-3-3%200-3%203m-12%2014v10h7v-21h-7v11m51-3l1%2010c0%203%206%204%209%203h9v-21h-7v8c0%206-1%208-2%208-3%200-4-2-4-9v-6l-3-1h-3v8'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.7730496453900708,"src":"/static/9adb24ddf43f0517a616276191e97774/5d2c5/github-git.png","srcSet":"/static/9adb24ddf43f0517a616276191e97774/002c1/github-git.png 250w,\n/static/9adb24ddf43f0517a616276191e97774/53f65/github-git.png 500w,\n/static/9adb24ddf43f0517a616276191e97774/5d2c5/github-git.png 1000w,\n/static/9adb24ddf43f0517a616276191e97774/e3f46/github-git.png 1366w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"previous":{"uri":"/video-conferencing-top-free-and-paid-software-for-you/","title":"Video Conferencing top free and paid software for you"},"next":{"uri":"/useful-git-commands-safely-cancel-commits-add-a-file-and-others/","title":"Useful Git Commands: safely cancel commits, add a file, and others"}},"pageContext":{"id":"cG9zdDoxNTkz","previousPostId":"cG9zdDoxNjAw","nextPostId":"cG9zdDoxNTk0"}},"staticQueryHashes":["104267996","1682016598","848497233"]}